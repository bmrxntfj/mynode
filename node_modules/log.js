var extsions=require('extsion');
var fs=require('fs');
var path=require('path');
exports.logPath=__dirname+'/../log/';

exports.info=function(text){
	log('info',text);	
}
exports.warn=function(text){
	log('warn',text);	
}
exports.error=function(text){
	log('error',text);
}


function log(type,text){
	try
	{
		var logPath=exports.logPath;
		var fileName= extsions.stringFormat('{0}{1}{2}{3}.txt',[logPath,extsions.dateFormat(new Date(),'yyyyMMddhhmmss'),Math.floor((Math.random()*10000)),type]);
		
		fs.exists(logPath,function(exists){
			if(!exists){
				fs.mkdir(logPath);
			}
		});
		fs.writeFile(path.normalize(fileName), text, function (err) {
			if(err){
				console.log('log fail info:'+ err);
			}
		});
	}
	catch(e){
		console.log('log execption:'+e);
	}
}
